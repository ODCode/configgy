<project xmlns:ivy="antlib:org.apache.ivy.ant">

    <!-- defaults for all projects -->
    <!-- PROJECT MUST DEFINE: project.name, project.version, project.package -->
    <!-- optional: "project.jar.classname" to build an executable jar -->
    <!-- optional: "skip.download" "skip.tests" -->
    <property name="source.dir" value="${basedir}/src/main/scala" />
    <property name="test.source.dir" value="${basedir}/src/test/scala" />
    <property name="target.dir" value="${basedir}/target/classes" />
    <property name="test.target.dir" value="${basedir}/target/test-classes" />
    <property name="dist.dir" value="${basedir}/dist/${project.name}-${project.version}" />
    <property name="docs.target.dir" value="${dist.dir}/docs" />
    
    <property environment="env" />
    
    <property name="ivy.install.version" value="2.0.0-beta1" />
    <property name="ivy.jar.dir" value="${basedir}/target/ivy" />
    <property name="ivy.jar.file" value="${ivy.jar.dir}/ivy.jar" />
    
    <!--
        download ivy from the web site so that it can be used without being
        installed. if the file has already been downloaded, we use a rename
        trick to avoid hitting the website again. (that would be annoying
        when building offline.)
    -->
    <target name="download-ivy" unless="skip.download">
        <mkdir dir="${ivy.jar.dir}"/>
        <condition property="ivy.url" value="file:${ivy.jar.file}">
            <available file="${ivy.jar.file}" />
        </condition>
        <property name="ivy.url" value="http://repo1.maven.org/maven2/org/apache/ivy/ivy/${ivy.install.version}/ivy-${ivy.install.version}.jar" />
        <get src="${ivy.url}" dest="${ivy.jar.file}.download" usetimestamp="true" />
        <move file="${ivy.jar.file}.download" tofile="${ivy.jar.file}" />
    </target>
    
    <!-- import ivy's ant tasks -->
    <target name="install-ivy" depends="download-ivy">
        <path id="ivy.lib.path">
            <fileset dir="${ivy.jar.dir}" includes="*.jar"/>
        </path>
        <taskdef resource="org/apache/ivy/ant/antlib.xml" uri="antlib:org.apache.ivy.ant" classpathref="ivy.lib.path" />
    </target>    

    <import file="base_rules.xml" />
</project>
